# 面经

## 自我介绍

省略

## 说说ioc

ioc就是控制反转，它就是用来管理我们spring项目中的bean，他把我们对象的创建还有调用交给了ioc容器进行处理，让我们的项目实现了松耦合，在ioc中真正实现松耦合的是依赖注入，依赖注入可以通过构造方法、setter方法、接口、注解、xml文件进行注入。 在我的项目中使用了ioc实现了松耦合，让我们每个板块更加独立，我们也可以灵活的替换和更新某个组件，我们在测试工程的时候对我们某个组件进行测试的时候也不用担心外部依赖的问题，使用ioc提高了我们代码可测性、独立性。

## 说下aop

aop就是面向切面编程， 他可以不更改我们原油代码的情况下对我们代码进行增强，在我的项目中就是我简历的OJ系统我使用了aop 前置环绕做了鉴权，后置环绕做了日志功能，异常环绕做了统一异常处理。aop主要有2种实现方式，第一种是jdk动态代理，该代理是java的代理技术，它要求目标必须实现接口，它与目标的关闭时平级关系，该代理就是会通过目标的接口描述来生成字节码，并且是在运行时动态生成的，然后调用代理类的方法需要进行反射。cglib动态代理就是第三方代理技术，他要求目标必须是非final类型， 因为它与目标的关系是父子级的关系，它通过ASM库来生成目标类的子类，通过重写来实现代码增强，cglib和jdk代理相比，他的工作速度会快，但是他的加载时间和大小可能会大，在cglib内部一个代理类会对应2个fastclass，一个fastclass对应代理本身一起使用就是我们写的前置环绕和后置环绕，一个fastclass会对应目标一起使用，这个fastclass会包含目标类的方法引用，这些方法引用毕竟被预编译成快速调用方法，一个fastclass可以对应多个方法，我们的fastclass和代理类会被缓存起来，将代理类的唯一类名作为key，代理类和fastclass最为vlaue，在cglib中无参方法是不需要反射就可以调用的，因为他没有参数，在有参方法是需要反射的，因为在字节码中不能显示出参数的具体值，需要反射去获取具体的类型和值。在spring aop默认中如果我们的目标有实现接口就使用jdk代理，如果目标没有时间接口并且非final类型就使用cglib动态代理。其实jdk和cglib代理最大的区别就是jdk动态代理是操作的内容是反射，cglib操作的内容是字节码。使用aop提高了我们项目的安全性，让我们的每个板块更加独立。

## 你如何使用MySQL和MongoDB

我拿Zuioj为例吧，我在mysql 性能优化方面主要做了索引优化和使用mongodb进行分页优化，在我数据库表字段中我把经常作为查询条件的设置为索引，在编写sql的时候我会尽量去命中索引，在命中索引的时候我也要避免索引失效，如进行数学运算的时候或者使用函数的时候会索引失效。我会使用redis作为我们缓存层，有些业务我会让他先访问redis查看数据是否存在如果不存在就访问mysql，然后再将mysql获取到的数据保存到redis，这么做的原因是降低mysql压力。在我们数据量特别大的时候我们使用mysql进行分页查询效率不如mongodb快，因为mongodb采用BSON存储数据，避免了数据转换消耗的时间，mongodb还将索引映射到内存中，可以加快我们的速度。

## 你是如何使用消息队列的

在我的项目中有些业务响应时间比较慢，我就通过消息队列实现了业务分割，有些业务不需要及时响应给客户就把它放到消息通道，当需要及时响应给客户的业务处理完就立刻响应客户，从而实现了快响应。

## 聊了20分钟OJ系统

这块不错

## 说说你springcloud熟悉什么组件

在我的项目中我使用了以下组件Eureka作为注册中心，就将所有的微服务注册到该注册中心进行管理，使用了Gateway作为网关，用来接受各种请求，使用config作为配置中心，实现了将配置远程化，Hystrix用于服务降级 断熔确保了服务的安全性和提高了用户体验，stream作为消息驱动实现了业务分割，openfign作为服务调用实现了负载均衡。

## 来聊聊基础吧，说一下什么是多线程

线程是比进程更小的执行单位，一个进程可以在执行中产生多个线程，多个线程会共享进程中的堆和方法区资源，但是每个线程都有自己堵路的程序计数器和jvm stack和本地方法stack，因为线程之间的切换工作负担要比进程小很多，我平时如果使用多线程我会使用线程池进行管理，使用线程池让我们jvm更好的利用cpu资源，用线程池实现了线程复用和线程资源管理控制最大线程并发数实现了对我们应用程序安全的管理和性能的提升而从实现并发操作

## 在你项目中你是如何处理异常的

在java中我们可以直接使用try-catch，但是我通常不会直接使用try-catch我会使用spring的统一异常处理或者使用aop的异常环绕，使用spring的异常处理只需要使用controlleradvice注解集合。

## 来聊一点网络吧 TCP和UDP之间的主要区别

TCP需要在我们链接前建立连接，并且在关闭链接的时候关闭我们的连接，确保了我们数据的可靠性、有序性的的传输，在数据传输会通过版号和确定机制来确定数据已经到达， 如果传输过程中发生了丢包，那么就会重新请求重新发送，如果在我们网络特别堵塞的情况下，我们tcp会减少发送速度，防止数据丢失和网络性能下降，TCP协议适合网页浏览文件下载等功能，udp不需要通信前建立连接，也不维护连接状态，数据包是相互独立的， 不能保证数据的可靠性和有序的传输，udp不需要维护可靠性这些复杂的业务也就是说该协议实时性特别高，udp协议适合网络直播，视频语音通话、游戏等业务场景。