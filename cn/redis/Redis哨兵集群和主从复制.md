# Redis哨兵集群和主从复制

## 主从复制

一个主流点对外提供服务，然后从节点作为主节点的备份，如果主节点挂了， 就运维介入让从节点作为主节点。

## 哨兵

在redis3.0之前实现集群主要借助的是哨兵sentinel工具来监控master节点的状态，如果master节点存在异常就做主从切换，将一台slave作为master，然后把新的主节点告诉客户端，但是这个切换步骤可能不会那么快，但是在切换的时间，客户端进行访问会出现顺断的情况（出现报错），而且哨兵节点只有一个节点对外提供服务，但是他的优点就是在自动切换的时候几乎是全自动，不需要运维介入。他的缺点也是很明显，在redis我们项目中，一个节点存储最多不要超过10个G，

否则会导致持久化文件过大，影响主从同步的速度或者数据恢复（重启）。







## 高可用集群

redis集群是由多个主从复制组成的分布式集群，他有高可用和复制和分片的功能，该集诶单不需要哨兵进行监听， 也能完成故障转移的功能，只需要每个集点设置成集群模式不像redis哨兵有那么复杂的配置，这个集群没有中心节点，可以水平扩展， redis文档说可以扩展到上万个（官方推荐不超过1000个）。他是把数据分散到各个主节点上。

当然这个也会出现顺断的情况只不过没哨兵那么严重罢了，比如你访问的数据在A slot，A slot在切换主节点，这时候这个A slot里面的数据就会出现顺断，但是B slot C slot不会。
