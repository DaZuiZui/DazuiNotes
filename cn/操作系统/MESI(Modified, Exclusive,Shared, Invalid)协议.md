# MESI(Modified, Exclusive,Shared, Invalid)协议

## 四种状态

## Modified

缓存行的数据已被修改，与主内存中的数据不一致，并且将缓存行是独占的（其他缓存不包含此数据）。当此数据写到主内存的时候，状态就会变成共享独占的。

## Exclusive

缓存行的数据与主内存中的数据一致，且该数据仅存在于当前缓存中。没有其他缓存拥有此数据的时候，可以直接修改数据，不需要通知其他缓存

## Shared

缓存行的数据与主内存中的数据一致，且数据可能存在多个缓存中。此状态下，数据可以被读取，但不能直接修改，修改前需要通知其他缓存并将状态变为Modified

## Invalid

缓存行的数据无效，表示当前缓存中的该数据无效，需要从主存或其他重新加载数据。

## MESI协议的过程

### 读操作

如果缓存行状态是Invalid，会发生缓存未命中，处理器需要从主存或其他缓存中获取数据，加载到缓存中，并将状态设置为Shared（如果其他缓存中有该数据），或 Exclusive（如果其他缓存中没有该数据）。