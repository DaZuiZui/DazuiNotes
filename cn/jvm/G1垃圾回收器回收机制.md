# G1垃圾回收器回收机制

## 垃圾标记过程

### 初始标记

这个阶段我们G1回暂停应用程序的执行，直接扫描根对象，标记这些对象直接引用的对象，这些根对象可能包括活跃线程栈帧、静态变量等，初始标记是一个短暂的停顿，目的就是标记一部分活跃的对象，方便后续的标记过程能够准确的追踪对象的引用关系。

### 并发标记

在并发标记的时候不会暂停我们的应用程序，我们的G1会扫描我们整个堆，从初始标记的对象开始，递归的查询对象的之间的关联，并标记所有可达对象。

### 最终标记

在并发标记结束后，G1会再次进行一次短暂的停顿，进行最终的标记，这个阶段，G1会标记在并发标记期间产生的新对象，

### 筛选

G1垃圾回收会选择一个最有价值内存区域进行回收（年轻代、老年代)，这环节也包括了，年轻代内存A转到年轻代内存B的一个过程。

## 垃圾回收方法是

### Young GC（年轻代垃圾回收）

这里的垃圾回收主要针对Eden和Survivor区域的对象进行回收。

当Eden去和Survivor区填满的时候会触发。

存活的对象可能移动到老年代，可能移动到幸存者区域。

## Mixed GC（混合垃圾回收）

这个可以同时回收一部分老年代和年轻代中的对象， 该方法关注的点是减少停顿的同时对整个堆进行有效的回收。

它会动态选择优先级最高的区域进行回收。

## FUll GC （完全回收）

对整个Java堆进行完整的垃圾回收包括老年代、年轻代。

只有在老年代碎片化严重的时候或者堆内存达到阈值的时候才会触发

FULL GC停留的时间较长，他需要对整个堆内存进行回收。