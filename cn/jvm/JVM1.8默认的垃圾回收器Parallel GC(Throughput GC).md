# JVM1.8默认的垃圾回收器Parallel GC(Throughput GC)

## Paraller

Parallel是一种多线程的垃圾回收器，他主要的目标就是最大化吞吐量（**吞吐量是值应用程序实际执行代码的时间相对于总时间（包括垃圾回收时间）**）的比例。Parallel GC在老年代和新生代垃圾回收会使用多线程执行。

## 新生代

新生代使用的是复制算法。

## 老年代

老年代采用的是MSC回收算法

### MSC （Mark-Sweep-Compact）

#### Marking 标记

在标记就单，垃圾回收器回遍历堆中的所有对象，识别出来哪些对象是可达的。并且将这些活跃的对象标记为活跃的伙计。这个过程通常是通过（GC Roots，通常是静态变量、栈中的引用等）开始进行的。

#### Sweeping 清除

在清除阶段，垃圾回收器回扫描堆中的没有被标记的对象，将这些对象从内存中释放，一边以后可以分配给新的对象。这一步只会简单清楚不可达的对象，不会对内存进行整理。因此可能导致内存碎片化的问题。

#### Compacting 压缩

压缩阶段可以解决内存碎片化的问题。在清除阶段之后，堆中可能出现碎片，这些碎片会导致内存分配不连续和低效。

## 工作流程

**标记阶段**：首先，标记所有存活的对象。

**清除阶段**：接着，清除所有未标记的对象，将它们的内存回收。

**压缩阶段**：最后，压缩存活的对象，将它们集中到堆的一端，释放出连续的可用内存。

## 优点缺点

### 优点

可以有效地回收内存并减少内存碎片，然后后续的内存分配更加高效。

适合老年代，因为老年代中对象存活率较高。内存碎片可能更为严重。

### 缺点

 MSC可能会导致比较长时间的Stop-the-world（STW）停顿。因为压缩过程中，整个堆中的所有对象都可能需要移动。

 开销比较大：压缩阶段需要复制和移动大量的对象，这增加了垃圾回收的开销。