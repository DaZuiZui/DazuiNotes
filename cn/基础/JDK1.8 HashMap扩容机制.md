# JDK1.8 HashMap扩容机制

## 扩容

**扩容条件**

当HashMap的元素容量到达了75%就会触发扩容操作。

**扩容操作**

扩容操作会将HashMap的容量扩大为原来的2倍。

**树化操作**

在插入之前，HashMap 会先判断当前桶中的链表长度是否大于等于 8。如果大于等于 8，那么就会将这个链表转换为红黑树。因为红黑树的查找速度是log(n)和链表是O(n)

**在旧的Map转移到新的Map**

直接把内存移过去。

## Put

首先根据对象的hashcode计算出索引，如果发生hash冲突了就选择是以链表方式解决还是红黑树。如果equals也相等那么就更新v